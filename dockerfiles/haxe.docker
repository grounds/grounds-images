FROM haxe:latest

MAINTAINER Gaetan Gueraud <exadeci@gmail.com>

ENV HAXE_STD_PATH $HAXE/std/
ENV PATH $HAXE/:$PATH

# Set the locale
RUN locale-gen en_US.UTF-8
ENV LANG en_US.UTF-8

ENV FILE Main.hx
ENV EXEC haxe -main Main --interp

ENV DEV /home/dev

COPY shared/* $DEV/

RUN useradd dev
RUN chown -R dev: $DEV

USER dev
WORKDIR $DEV

ENTRYPOINT ["./run.sh"]
